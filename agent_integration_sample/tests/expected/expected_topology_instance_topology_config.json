{
   "stop_snapshot":false,
   "relations":[
      {
         "source_id":"urn:stackstate-agent:/stubbed.hostname",
         "type":"runs",
         "target_id":"urn:agent-integration:/stubbed.hostname:agent-integration",
         "data":{

         }
      },
      {
         "source_id":"urn:agent-integration:/stubbed.hostname:agent-integration",
         "type":"has",
         "target_id":"urn:agent-integration-instance:/stubbed.hostname:agent-integration:sample",
         "data":{

         }
      },
      {
         "source_id":"urn:example:/application:some_application",
         "type":"IS_HOSTED_ON",
         "target_id":"urn:example:/host:this_host",
         "data":{

         }
      }
   ],
   "start_snapshot":false,
   "components":[
      {
         "data":{
            "layer":"layer-conf-a",
            "identifiers":[
               "urn:process:/stubbed.hostname:1:1234567890"
            ],
            "name":"StackState Agent:stubbed.hostname",
            "tags":[
               "hostname:stubbed.hostname",
               "stackstate-agent"
            ],
            "hostname":"stubbed.hostname",
            "domain":"domain-conf-a",
            "environments":[
               "environment-conf-a"
            ],
            "cluster":"stubbed-cluster-name"
         },
         "type":"stackstate-agent",
         "id":"urn:stackstate-agent:/stubbed.hostname"
      },
      {
         "data":{
            "layer":"layer-conf-a",
            "name":"stubbed.hostname:agent-integration",
            "service_checks":[
               {
                  "stream_id":-1,
                  "conditions":[
                     {
                        "value":"stubbed.hostname",
                        "key":"host"
                     },
                     {
                        "value":"agent-integration",
                        "key":"tags.integration-type"
                     }
                  ],
                  "name":"Service Checks"
               }
            ],
            "hostname":"stubbed.hostname",
            "integration":"agent-integration",
            "environments":[
               "environment-conf-a"
            ],
            "cluster":"stubbed-cluster-name",
            "domain":"domain-conf-a",
            "checks":[
               {
                  "stream_id":-1,
                  "name":"Integration Health",
                  "is_service_check_health_check":true
               }
            ],
            "tags":[
               "hostname:stubbed.hostname",
               "integration-type:agent-integration"
            ]
         },
         "type":"agent-integration",
         "id":"urn:agent-integration:/stubbed.hostname:agent-integration"
      },
      {
         "data":{
            "layer":"layer-conf-a",
            "name":"agent-integration:sample",
            "service_checks":[
               {
                  "stream_id":-1,
                  "conditions":[
                     {
                        "value":"stubbed.hostname",
                        "key":"host"
                     },
                     {
                        "value":"agent-integration",
                        "key":"tags.integration-type"
                     },
                     {
                        "value":"sample",
                        "key":"tags.integration-url"
                     }
                  ],
                  "name":"Service Checks"
               }
            ],
            "hostname":"stubbed.hostname",
            "integration":"agent-integration",
            "environments":[
               "environment-conf-a"
            ],
            "cluster":"stubbed-cluster-name",
            "domain":"domain-conf-a",
            "checks":[
               {
                  "stream_id":-1,
                  "name":"Integration Instance Health",
                  "is_service_check_health_check":true
               }
            ],
            "tags":[
               "hostname:stubbed.hostname",
               "integration-type:agent-integration",
               "integration-url:sample"
            ]
         },
         "type":"agent-integration-instance",
         "id":"urn:agent-integration-instance:/stubbed.hostname:agent-integration:sample"
      },
      {
         "data":{
            "metrics":[
               {
                  "priority":"HIGH",
                  "stream_id":-1,
                  "unit_of_measure":"Percentage",
                  "name":"Host CPU Usage",
                  "conditions":[
                     {
                        "value":"this-host",
                        "key":"tags.hostname"
                     },
                     {
                        "value":"eu-west-1",
                        "key":"tags.region"
                     }
                  ],
                  "aggregation":"MEAN",
                  "metric_field":"system.cpu.usage"
               },
               {
                  "priority":"HIGH",
                  "stream_id":-2,
                  "unit_of_measure":"Percentage",
                  "name":"Host Availability",
                  "conditions":[
                     {
                        "value":"this-host",
                        "key":"tags.hostname"
                     },
                     {
                        "value":"eu-west-1",
                        "key":"tags.region"
                     }
                  ],
                  "aggregation":"MEAN",
                  "metric_field":"location.availability"
               }
            ],
            "domain":"domain-conf-a",
            "identifiers":[
               "another_identifier_for_this_host"
            ],
            "name":"this-host",
            "tags":[
               "integration-type:agent-integration",
               "integration-url:sample"
            ],
            "labels":[
               "host:this_host",
               "region:eu-west-1"
            ],
            "layer":"layer-conf-a",
            "environments":[
               "environment-conf-a"
            ],
            "environment":"Production",
            "checks":[
               {
                  "stream_id":-1,
                  "max_window":300000,
                  "name":"Max CPU Usage (Average)",
                  "deviating_value":75,
                  "critical_value":90,
                  "is_metric_maximum_average_check":true,
                  "remediation_hint":"There is too much activity on this host"
               },
               {
                  "stream_id":-1,
                  "max_window":300000,
                  "name":"Max CPU Usage (Last)",
                  "deviating_value":75,
                  "critical_value":90,
                  "is_metric_maximum_last_check":true,
                  "remediation_hint":"There is too much activity on this host"
               },
               {
                  "stream_id":-1,
                  "max_window":300000,
                  "name":"Min CPU Usage (Average)",
                  "deviating_value":10,
                  "is_metric_minimum_average_check":true,
                  "critical_value":5,
                  "remediation_hint":"There is too few activity on this host"
               },
               {
                  "stream_id":-1,
                  "max_window":300000,
                  "name":"Min CPU Usage (Last)",
                  "deviating_value":10,
                  "is_metric_minimum_last_check":true,
                  "critical_value":5,
                  "remediation_hint":"There is too few activity on this host"
               }
            ]
         },
         "type":"Host",
         "id":"urn:example:/host:this_host"
      },
      {
         "data":{
            "metrics":[
               {
                  "priority":"HIGH",
                  "stream_id":-1,
                  "unit_of_measure":"Count",
                  "name":"2xx Responses",
                  "conditions":[
                     {
                        "value":"some_application",
                        "key":"tags.application"
                     },
                     {
                        "value":"eu-west-1",
                        "key":"tags.region"
                     }
                  ],
                  "aggregation":"MEAN",
                  "metric_field":"2xx.responses"
               },
               {
                  "priority":"HIGH",
                  "stream_id":-2,
                  "unit_of_measure":"Count",
                  "name":"5xx Responses",
                  "conditions":[
                     {
                        "value":"some_application",
                        "key":"tags.application"
                     },
                     {
                        "value":"eu-west-1",
                        "key":"tags.region"
                     }
                  ],
                  "aggregation":"MEAN",
                  "metric_field":"5xx.responses"
               }
            ],
            "domain":"domain-conf-a",
            "identifiers":[
               "another_identifier_for_some_application"
            ],
            "name":"some-application",
            "tags":[
               "integration-type:agent-integration",
               "integration-url:sample"
            ],
            "labels":[
               "application:some_application",
               "region:eu-west-1",
               "hosted_on:this-host"
            ],
            "layer":"layer-conf-a",
            "environments":[
               "environment-conf-a"
            ],
            "environment":"Production",
            "version":"0.2.0",
            "checks":[
               {
                  "max_window":300000,
                  "name":"OK vs Error Responses (Maximum)",
                  "deviating_value":50,
                  "is_metric_maximum_ratio_check":true,
                  "numerator_stream_id":-2,
                  "denominator_stream_id":-1,
                  "critical_value":75
               },
               {
                  "stream_id":-2,
                  "max_window":300000,
                  "name":"Error Response 99th Percentile",
                  "deviating_value":50,
                  "is_metric_maximum_percentile_check":true,
                  "percentile":99,
                  "critical_value":70
               },
               {
                  "max_window":300000,
                  "name":"OK vs Error Responses (Failed)",
                  "deviating_value":50,
                  "is_metric_failed_ratio_check":true,
                  "numerator_stream_id":-2,
                  "denominator_stream_id":-1,
                  "critical_value":75
               },
               {
                  "stream_id":-1,
                  "max_window":300000,
                  "name":"Success Response 99th Percentile",
                  "deviating_value":10,
                  "is_metric_minimum_percentile_check":true,
                  "percentile":99,
                  "critical_value":5
               }
            ]
         },
         "type":"Application",
         "id":"urn:example:/application:some_application"
      },
      {
         "data":{
            "domain":"tag-domain",
            "tags":[
               "integration-type:agent-integration",
               "integration-url:sample"
            ],
            "labels":[
               "default:true"
            ],
            "layer":"tag-layer",
            "environments":[
               "environment-conf-a"
            ],
            "metrics":[
               {
                  "priority":"HIGH",
                  "stream_id":-1,
                  "unit_of_measure":"Count",
                  "name":"2xx Responses",
                  "conditions":[
                     {
                        "value":"some_application",
                        "key":"tags.application"
                     },
                     {
                        "value":"eu-west-1",
                        "key":"tags.region"
                     }
                  ],
                  "aggregation":"MEAN",
                  "metric_field":"2xx.responses"
               },
               {
                  "priority":"HIGH",
                  "stream_id":-2,
                  "unit_of_measure":"Count",
                  "name":"5xx Responses",
                  "conditions":[
                     {
                        "value":"some_application",
                        "key":"tags.application"
                     },
                     {
                        "value":"eu-west-1",
                        "key":"tags.region"
                     }
                  ],
                  "aggregation":"MEAN",
                  "metric_field":"5xx.responses"
               }
            ],
            "name":"some-tags",
            "identifiers":[
               "default-identifiers",
               "tag-identifiers-a",
               "tag-identifier"
            ],
            "environment":"default-environment",
            "version":"0.2.0",
            "checks":[
               {
                  "max_window":300000,
                  "name":"OK vs Error Responses (Maximum)",
                  "deviating_value":50,
                  "is_metric_maximum_ratio_check":true,
                  "numerator_stream_id":-2,
                  "denominator_stream_id":-1,
                  "critical_value":75
               },
               {
                  "stream_id":-2,
                  "max_window":300000,
                  "name":"Error Response 99th Percentile",
                  "deviating_value":50,
                  "is_metric_maximum_percentile_check":true,
                  "percentile":99,
                  "critical_value":70
               },
               {
                  "max_window":300000,
                  "name":"OK vs Error Responses (Failed)",
                  "deviating_value":50,
                  "is_metric_failed_ratio_check":true,
                  "numerator_stream_id":-2,
                  "denominator_stream_id":-1,
                  "critical_value":75
               },
               {
                  "stream_id":-1,
                  "max_window":300000,
                  "name":"Success Response 99th Percentile",
                  "deviating_value":10,
                  "is_metric_minimum_percentile_check":true,
                  "percentile":99,
                  "critical_value":5
               }
            ]
         },
         "type":"Application",
         "id":"urn:example:/application:some_application/tags"
      },
      {
        "data": {
           "domain": "domain-conf-a",
           "environment": "Production",
           "environments": [
             "environment-conf-a"
           ],
           "identifiers": ["another_identifier_for_delete_test_host"],
           "labels": ["host:delete_test_host", "region:eu-west-1"],
           "layer": "layer-conf-a",
           "name": "delete-test-host",
           "tags": ["integration-type:agent-integration", "integration-url:sample"]
        },
        "id": "urn:example:/host:host_for_deletion",
        "type": "Host"
      }
   ],
   "instance_key":{
      "url":"integrations",
      "type":"agent"
   },
   "delete_ids": [
     "urn:example:/host:host_for_deletion"
   ]
}
